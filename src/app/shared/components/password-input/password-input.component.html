<div>
  @if (label()) {
    <label [for]="inputId()" class="mb-1.5 block text-sm font-medium dark:text-gray-200" [class]="labelClass()">
      {{ label() }}
    </label>
  }

  <div class="relative">
    <input
      [id]="inputId()"
      [type]="inputType()"
      [formField]="$any(field())"
      [placeholder]="placeholder()"
      (input)="onInput($event)"
      [class]="classes()"
    />
    <button
      type="button"
      tabindex="-1"
      (click)="toggleVisibility()"
      class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 transition-colors hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300"
      [attr.aria-label]="visible() ? 'Hide password' : 'Show password'"
    >
      <app-icon [name]="visible() ? 'eye-off' : 'eye'" size="sm" />
    </button>
  </div>

  <!-- Strength meter -->
  @if (showStrength() && passwordValue()) {
    <div class="mt-2">
      <div class="h-1.5 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700">
        <div
          class="h-full rounded-full transition-all duration-300"
          [class]="strength().color"
          [style.width]="strength().width"
        ></div>
      </div>
      <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">{{ strength().label }}</p>
    </div>
  }

  @if (hint()) {
    <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">{{ hint() }}</p>
  }

  @if (touched() && invalid()) {
    <ul role="alert" class="mt-1 space-y-0.5 text-xs text-red-600 dark:text-red-400">
      @for (err of errors(); track $index) {
        <li>{{ err.message }}</li>
      }
    </ul>
  }
</div>
