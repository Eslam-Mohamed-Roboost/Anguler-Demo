<div>
  @if (label()) {
    <label [for]="inputId()" class="mb-1 block text-sm font-medium dark:text-gray-200">
      {{ label() }}
    </label>
  }

  <div
    class="flex flex-wrap items-center gap-1.5 rounded border px-2 py-1.5 transition-colors focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 dark:border-gray-600 dark:bg-gray-800"
  >
    @for (tag of tags(); track tag + '-' + $index) {
      <span
        class="inline-flex items-center gap-1 rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-700 dark:bg-blue-900/40 dark:text-blue-300"
      >
        {{ tag }}
        <button
          type="button"
          (click)="removeTag($index)"
          class="inline-flex items-center rounded-full p-0.5 transition-colors hover:bg-blue-200 dark:hover:bg-blue-800"
          [attr.aria-label]="'Remove ' + tag"
        >
          <app-icon name="close" size="xs" />
        </button>
      </span>
    }

    @if (!isAtMax) {
      <input
        [id]="inputId()"
        type="text"
        [value]="inputValue()"
        (input)="onInput($event)"
        (keydown)="onKeyDown($event)"
        [placeholder]="tags().length === 0 ? placeholder() : ''"
        class="min-w-[80px] flex-1 border-none bg-transparent py-0.5 text-sm outline-none dark:text-gray-100 dark:placeholder-gray-400"
      />
    }
  </div>

  <ng-content />
</div>
